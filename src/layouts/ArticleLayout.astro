---
// Thirdparty
import i18next, { t } from "i18next";

// Components
import BaseLayout from "@layouts/BaseLayout.astro";

// Utils
import { parseArticleURL } from "src/utils";

const props = Astro.props.frontmatter || Astro.props;

const { slug: articleSlug, language: articleLanguage } = parseArticleURL(
  Astro.url.pathname
);
---

<BaseLayout>
  <article
    class="prose max-w-none prose-h1:text-5xl w-full lg:w-[960px] px-2 lg:px-0 pb-4 ml-auto mr-auto"
  >
    <!-- Date & Tags header -->
    <header class="flex justify-between opacity-50">
      <p>{props.date}</p>
      <p>{props.tags.join(" / ")}</p>
    </header>
    <!-- Title -->
    <h1>{props.title}</h1>
    <!-- Languages list -->
    <div class="flex justify-between items-center">
      <ul class="flex gap-4 list-none px-0">
        {
          props.languages.map((lang: string) => (
            <li class="px-0">
              <a
                href={`${lang}`}
                class={articleLanguage == lang ? "opacity-100" : "opacity-50"}
              >
                {i18next.getFixedT(lang)("meta.language")}
              </a>
            </li>
          ))
        }
      </ul>
      <a
        href={`https://github.com/tinytengu/blog/edit/main/src/pages/${articleSlug}/${articleLanguage}.mdx`}
        target="_blank">{t("edit")}</a
      >
    </div>
    <slot />
  </article>
</BaseLayout>
